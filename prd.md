# Project Requirements Document: Query Builder

The following table outlines the detailed functional requirements of the **Query Builder** web application.

| Requirement ID | Description                        | User Story                                                                                                                                   | Expected Behavior/Outcome                                                                                                                                                         |
|----------------|------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| FR001          | Launching the Query Builder         | As a user, I want to open the application and view the available fields (dimensions, metrics, and filters) so I can start building my query. | The system should display a drag-and-drop interface with panels for available dimensions, metrics, and filters, based on the semantic layer of the connected database.            |
| FR002          | Drag-and-Drop Interface             | As a user, I want to be able to drag dimensions, metrics, and filters into a canvas so I can visually construct a query.                    | Users should be able to drag and place fields into designated zones (e.g., SELECT, WHERE, GROUP BY) and visually compose a query.                                                 |
| FR003          | Semantic Layer Support              | As a user, I want to understand what each field represents so I can make better decisions on what to include in my query.                   | Each field should have associated metadata (e.g., description, type, source table) shown on hover or click, coming from a semantic model.                                        |
| FR004          | Query Generation                    | As a user, I want the application to generate a valid SQL query based on the elements I have dragged and dropped.                           | The system should translate the visual configuration into an executable SQL query, viewable by the user.                                                                          |
| FR005          | Query Execution                     | As a user, I want to execute the query against the database and see the results so I can work with actual data.                             | The system should submit the generated SQL to the connected database and return a preview of the results in a table format.                                                       |
| FR006          | Export Results as CSV               | As a user, I want to be able to download the results of my query as a CSV file so I can analyze it offline.                                 | After execution, the user should have the option to export the results to a CSV file with one click.                                                                             |
| FR007          | Create Table from Results           | As a user, I want to be able to save the result of my query as a new table in the same database so I can use it later.                      | The system should prompt the user to input a table name, validate it, and create the table in the connected database using the current query result.                             |
| FR008          | Field Search and Filtering          | As a user, I want to be able to search and filter the list of available dimensions, metrics, and filters to find what I need faster.        | The field list should include search and filtering capabilities to make it easier to locate specific fields in large semantic layers.                                            |
| FR009          | Query Editing and Preview           | As a user, I want to review and optionally edit the auto-generated SQL before executing it.                                                  | The system should show the raw SQL generated and allow advanced users to switch to SQL editing mode to make manual adjustments.                                                  |
| FR010          | Save and Load Query Configurations  | As a user, I want to save the queries Iâ€™ve built and load them later to continue working on them.                                            | The system should allow saving the configuration (visual layout and SQL) and loading previously saved queries for editing or re-running.                                        |
| FR011          | Validation and Error Feedback       | As a user, I want to know if there are any errors in my query before executing it.                                                           | The system should validate the query before submission and show clear error messages (e.g., invalid field combination, syntax errors).                                           |
| FR012          | Responsive and Intuitive UI         | As a user, I want the interface to be intuitive and responsive so that building queries feels natural and efficient.                        | The UI should follow modern UX patterns for drag-and-drop interactions, with visual cues for invalid placements and confirmations for actions like table creation.               |
